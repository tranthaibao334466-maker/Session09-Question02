CREATE TABLE "Users"(
    user_id SERIAL PRIMARY KEY,
    username VARCHAR(50),
    email VARCHAR(100)
);

-- Tạo khoảng 200 người dùng mẫu 

INSERT INTO "Users" (username, email)
VALUES 
('user1', '@gmail.com'),
('user2', '@gmail.com'),
('user3', '@gmail.com'),
('user4', '@gmail.com'),
('user5', '@gmail.com'),
('user6', '@gmail.com'),
('user7', '@gmail.com'),
('user8', '@gmail.com'),
('user9', '@gmail.com'),
('user10', '@gmail.com'),
('user11', '@gmail.com'),
('user12', '@gmail.com'),
('user13', '@gmail.com'),
('user14', '@gmail.com'),
('user15', '@gmail.com'),
('user16', '@gmail.com'),
('user17', '@gmail.com'),
('user18', '@gmail.com'),
('user19', '@gmail.com'),
('user20', '@gmail.com'),
('user21', '@gmail.com'),
('user22', '@gmail.com'),
('user23', '@gmail.com'),
('user24', '@gmail.com'),
('user25', '@gmail.com'),
('user26', '@gmail.com'),
('user27', '@gmail.com'),
('user28', '@gmail.com'),
('user29', '@gmail.com'),
('user30', '@gmail.com'),
('user31', '@gmail.com'),
('user32', '@gmail.com'),
('user33', '@gmail.com'),
('user34', '@gmail.com'),
('user35', '@gmail.com'),
('user36', '@gmail.com'),
('user37', '@gmail.com'),
('user38', '@gmail.com'),
('user39', '@gmail.com'),
('user40', '@gmail.com'),
('user41', '@gmail.com'),
('user42', '@gmail.com'),
('user43', '@gmail.com'),
('user44', '@gmail.com'),
('user45', '@gmail.com'),
('user46', '@gmail.com'),
('user47', '@gmail.com'),
('user48', '@gmail.com'),
('user49', '@gmail.com'),
('user50', '@gmail.com'),
('user51', '@gmail.com'),
('user52', '@gmail.com'),
('user53', '@gmail.com'),
('user54', '@gmail.com'),
('user55', '@gmail.com'),
('user56', '@gmail.com'),
('user57', '@gmail.com'),
('user58', '@gmail.com'),
('user59', '@gmail.com'),
('user60', '@gmail.com'),
('user61', '@gmail.com'),
('user62', '@gmail.com'),
('user63', '@gmail.com'),
('user64', '@gmail.com'),
('user65', '@gmail.com'),
('user66', '@gmail.com'),
('user67', '@gmail.com'),
('user68', '@gmail.com'),
('user69', '@gmail.com'),
('user70', '@gmail.com'),
('user71', '@gmail.com'),
('user72', '@gmail.com'),
('user73', '@gmail.com'),
('user74', '@gmail.com'),
('user75', '@gmail.com'),
('user76', '@gmail.com'),
('user77', '@gmail.com'),
('user78', '@gmail.com'),
('user79', '@gmail.com'),
('user80', '@gmail.com'),
('user81', '@gmail.com'),
('user82', '@gmail.com'),
('user83', '@gmail.com'),
('user84', '@gmail.com'),
('user85', '@gmail.com'),
('user86', '@gmail.com'),
('user87', '@gmail.com'),
('user88', '@gmail.com'),
('user89', '@gmail.com'),
('user90', '@gmail.com'),
('user91', '@gmail.com'),
('user92', '@gmail.com'),
('user93', '@gmail.com'),
('user94', '@gmail.com'),
('user95', '@gmail.com'),
('user96', '@gmail.com'),
('user97', '@gmail.com'),
('user98', '@gmail.com'),
('user99', '@gmail.com'),
('user100', '@gmail.com'),
('user101', '@gmail.com'),
('user102', '@gmail.com'),
('user103', '@gmail.com'),
('user104', '@gmail.com'),
('user105', '@gmail.com'),
('user106', '@gmail.com'),
('user107', '@gmail.com'),
('user108', '@gmail.com'),
('user109', '@gmail.com'),
('user110', '@gmail.com'),
('user111', '@gmail.com'),
('user112', '@gmail.com'),
('user113', '@gmail.com'),
('user114', '@gmail.com'),
('user115', '@gmail.com'),
('user116', '@gmail.com'),
('user117', '@gmail.com'),
('user118', '@gmail.com'),
('user119', '@gmail.com'),
('user120', '@gmail.com'),
('user121', '@gmail.com'),
('user122', '@gmail.com'),
('user123', '@gmail.com'),
('user124', '@gmail.com'),
('user125', '@gmail.com'),
('user126', '@gmail.com'),
('user127', '@gmail.com'),
('user128', '@gmail.com'),
('user129', '@gmail.com'),
('user130', '@gmail.com'),
('user131', '@gmail.com'),
('user132', '@gmail.com'),
('user133', '@gmail.com'),
('user134', '@gmail.com'),
('user135', '@gmail.com'),
('user136', '@gmail.com'),
('user137', '@gmail.com'),
('user138', '@gmail.com'),
('user139', '@gmail.com'),
('user140', '@gmail.com'),
('user141', '@gmail.com'),
('user142', '@gmail.com'),
('user143', '@gmail.com'),
('user144', '@gmail.com'),
('user145', '@gmail.com'),
('user146', '@gmail.com'),
('user147', '@gmail.com'),
('user148', '@gmail.com'),
('user149', '@gmail.com'),
('user150', '@gmail.com'),
('user151', '@gmail.com'),
('user152', '@gmail.com'),
('user153', '@gmail.com'),
('user154', '@gmail.com'),
('user155', '@gmail.com'),
('user156', '@gmail.com'),
('user157', '@gmail.com'),
('user158', '@gmail.com'),
('user159', '@gmail.com'),
('user160', '@gmail.com'),
('user161', '@gmail.com'),
('user162', '@gmail.com'),
('user163', '@gmail.com'),
('user164', '@gmail.com'),
('user165', '@gmail.com'),
('user166', '@gmail.com'),
('user167', '@gmail.com'),
('user168', '@gmail.com'),
('user169', '@gmail.com'),
('user170', '@gmail.com'),
('user171', '@gmail.com'),
('user172', '@gmail.com'),
('user173', '@gmail.com'),
('user174', '@gmail.com'),
('user175', '@gmail.com'),
('user176', '@gmail.com'),
('user177', '@gmail.com'),
('user178', '@gmail.com'),
('user179', '@gmail.com'),
('user180', '@gmail.com'),
('user181', '@gmail.com'),
('user182', '@gmail.com'),
('user183', '@gmail.com'),
('user184', '@gmail.com'),
('user185', '@gmail.com'),
('user186', '@gmail.com'),
('user187', '@gmail.com'),
('user188', '@gmail.com'),
('user189', '@gmail.com'),
('user190', '@gmail.com'),
('user191', '@gmail.com'),
('user192', '@gmail.com'),
('user193', '@gmail.com'),
('user194', '@gmail.com'),
('user195', '@gmail.com'),
('user196', '@gmail.com'),
('user197', '@gmail.com'),
('user198', '@gmail.com'),
('user199', '@gmail.com'),
('user200', '@gmail.com');


CREATE INDEX idx_email ON "Users" USING HASH(email); 
-- Hash index thường được sử dụng cho các phép so sánh bằng (=) ( tốc độ nhanh hơn B-tree trong trường hợp này)
DROP INDEX idx_email;

CREATE INDEX idx_email ON "Users"(email);

EXPLAIN ANALYZE SELECT * FROM "Users" WHERE email = '@gmail.com';
-- Sử dụng B-tree index: 0.071 ms
-- Sử dụng Hash index: 0.043 ms

